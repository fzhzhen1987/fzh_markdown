# 指向字符指针的指针:char *argv[]等价于char **argv

- [1. char *argv[] 和 char **argv](#1)  
- [2. 实际例子](#2)  
- [3. 注意事项](#3)  
- [4. 讲解 \*(*(&arr + 1) - 1)](#4)  

<h4 id="1">[1. char *argv[] 和 char **argv]</h>  

- 指向字符指针的指针(char **argv)是一种特殊的指针类型,它可以指向一个字符指针数组(char *argv[]),也可以作为一个字符指针数组的函数参数.
	1. argv[i]或者*(argv+i)表示第i个字符串  
	1. 定义一个指向字符指针的指针(二级指针)的语法是:  
	```c
	char **ptr; // 二级指针ptr:是一个指向一级指针char *数组的指针
	```

	1. 定义一个字符指针数组的语法是:  
	```c
	char *arr[] = {"str1", "str2", "str3"}; // arr是一个字符指针数组,存储了三个字符串常量的地址
	printf("%p\n", arr); // 假设输出 0x1000
	printf("%p\n", arr+1); // 输出 0x1004
	printf("%p\n", arr+2); // 输出 0x1008
	printf("%s\n", arr[0]); // 输出str1
	printf("%s\n", arr[1]); // 输出str2
	printf("%s\n", arr[2]); // 输出str3
	```

<h4 id="2">[2. 实际例子]</h>  

- 指向字符指针的指针可以用来访问字符指针数组中的元素,例如:  
	```c
	char **ptr = arr; // ptr指向arr[0]的地址
	printf("%s\n", *ptr); // 输出str1
	printf("%s\n", *(ptr+1)); // 输出str2
	printf("%s\n", *(ptr+2)); // 输出str3
	```

- 当把字符指针数组作为函数参数时,它会被编译器转换为指向字符指针的指针,因为函数只需要传递数组的首地址即可,例如:  
	```c
	void print_array(char *arr[], int size); // 函数声明,arr是一个字符指针数组
	
	void print_array(char **arr, int size) { // 函数定义,arr是一个指向char *类型的指针,和上面等价
		for (int i = 0; i < size; i++) {
			printf("%s\n", arr[i]); // 或者printf("%s\n", *(arr+i));
		}
	}
	```

<h4 id="3">[3. 注意事项和常见错误]</h>  

1. 指向字符指针的指针和字符数组不同,不能用strcpy或者strcat等函数来操作它们,因为它们只是存储了地址,而不是实际的字符串.  
1. 指向字符指针的指针和字符数组也不同,不能用sizeof运算符来获取它们的长度.因为它们只是存储了地址,而不是实际的字符串.  
1. 指向字符指针的指针和字符数组也不同,不能用==运算符来比较它们是否相等.因为它们只是存储了地址,而不是实际的字符串.要比较两个字符串是否相等,要用strcmp函数.  

<h4 id="4">[4. 讲解 *(*(&arr + 1) - 1)]</h>  

- `int arr[5]={1,2,3,4,5}`  
	1. (&arr)  
		> arr是数组首元素地址,对arr取地址就得到整个数组的地址  
	1. (&arr + 1)  
		> 整个数组的地址+1,相当于逃过整个数组  
	1. *(&arr + 1)  
		> 对跳过整个数组的下一个地址 取值操作后还是一个地址(※※二级地址变为一级地址,指针原来指向整个数组,现在指向某个元素)  
	1. (*(&arr + 1) - 1)  
		> 指向元素的指针 - 1,相当于元素地址 - 1.  
	1. \*(*(&arr + 1) - 1)  
		> 元素地址 -1 后取值得到5  



